# Week2作业

## 第一题：（需提交代码作业）不使用开源框架，基于 TCP 协议改造 echo 服务端和客户端代码，实现服务端和客户端可以传输单个文件的功能。

### 实现思路：
- 分别创建客户端和服务器端
- 客户端(echo_client_file.py)实现功能：连接服务器 -> 发送客户端文件 -> 接受服务器端发送回来的文件
- 服务器端(echo_server_file.py)实现功能: 等待客户端连接 -> 接受客户端文件 -> 发送刚接受的文件到客户端
- 函数(oper_file.py)：因客户端和服务器端都需要发送和接受文件，故新建两个函数供客户端和服务器端发送和接受时调用

### 遇到问题（待解决）：
- 服务器端无法接受一个connection的多个文件，目前情况是接收好一个文件后无法重复使用socket连接接收下一个文件，报错套接字只能使用一次
- 服务器端如何优雅结束？目前情况是服务器端一直是等待connection
- 如何得到客户端文件的文件名？使用struct.unpack后得到filename='filename\x01\x00\x00\x00...',使用strip无法删除后面的二进制内容，目前使用预先定义的文件名

### 最终实现
- Step1: 启动服务器端
- Step2：启动客户端，并向服务器端发送文件
- Step3：服务器端接受文件，并向客户端传回文件
- Step4：客户端能够正常接受文件，客户端连接断开

## 第二题：（需提交代码作业）使用 requests 库抓取知乎任意一个话题下排名前 15 条的答案内容 (如果对前端熟悉请抓取所有答案)，并将内容保存到本地的一个文件。

### 实现思路：
- 先抓取主页面上fashion排行的前15个问题及答案链接，再进入答案页面获取答案
- get_question_link: 获取知乎上的前15个问题及答案链接页面
- get_answer：获取单个答案链接页面的答案
- save_file：将问题和答案保存到文件里
- save_page：将答案页面保存到文件里

### 遇到问题
- 问题1：设置cookies貌似不生效，始终无法得到15个问题的页面，一直会跳转到登陆页面
- 问题2：Xpath在页面调试的时候可以正常显示内容，但是通过代码设置得到的结果是空
- 问题3：保存问题和答案时，用什么数据结构暂存问题和答案对比较合适？List或者Dict？如果数据量比较大时，如何流式处理写文件？

### 最终实现
- 没能够解决Cookies登录问题，所以15个问题的页面无法正常获取
- 只能够拿到单个问题的答案并将答案写入文件中
